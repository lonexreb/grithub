<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grithub: Your Sports Skill Development Journey</title>
  
  <!-- Optional: Import TailwindCSS via CDN for rapid styling -->
  <script>
  document.getElementById('training-plan-form').addEventListener('submit', async function(event) {
      event.preventDefault();
      
      // Capture form values
      const height = document.getElementById('height').value;
      const weight = document.getElementById('weight').value;
      const age = document.getElementById('age').value;
      const fitness_level = document.getElementById('fitness_level').value;
      const injury_history = document.getElementById('injury_history').value;
      const target_goal = document.getElementById('target_goal').value;
      
      // Create a user profile object to send to the backend
      const userProfileDict = {
         height: parseFloat(height),
         weight: parseFloat(weight),
         age: parseInt(age),
         currentExerciseLevel: fitness_level,
         injury_history: injury_history,
         target_goal: target_goal
      };

      // Log the user input to the console
      console.log("User Input:", userProfileDict);
  
      try {
          // Make a POST request to the /api/workout endpoint
          const response = await fetch("/api/workout", {
              method: "POST",
              headers: {
                  "Content-Type": "application/json"
              },
              body: JSON.stringify(userProfileDict)
          });
  
          if (!response.ok) {
              // Parse the error response if available
              const errorResponse = await response.json().catch(() => null);
              throw new Error(errorResponse?.detail || "Network response was not ok");
          }
  
          // Parse the JSON response
          const result = await response.json();
          console.log("Generated Training Plan:", result.trainingPlan); // Log the training plan
  
          // Display the training plan in the output div
          document.getElementById('user-profile-output').textContent = JSON.stringify(result.trainingPlan, null, 2);
          
      } catch (error) {
          console.error("Error generating training plan:", error);
          document.getElementById('user-profile-output').textContent = `Error generating training plan: ${error.message}`;
      }
  });
</script>
</body>
</html>
