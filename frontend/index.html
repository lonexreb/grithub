<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Grithub: Your Sports Skill Development Journey</title>
  
  <!-- Optional: Import TailwindCSS via CDN for rapid styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Link to your custom stylesheet -->
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body class="font-roboto">
    <!-- Centered header: using flex-col and items-center -->
    <header class="text-white p-4 flex flex-col items-center">
        <div class="flex items-center space-x-3">
          <img src="/static/images/logo.png" alt="Grithub Logo" class="w-10 h-10" />
          <h1 class="text-xl font-bold">Grithub: Your Sports Skill Development Journey</h1>
        </div>
        
        <nav class="mt-2">
          <ul class="flex space-x-4">
            <li><a href="#" class="hover:underline">Home</a></li>
            <li><a href="#" class="hover:underline">About</a></li>
          </ul>
        </nav>
    </header>
      
    <main class="p-6">
        <section class="max-w-md mx-auto p-6 rounded shadow bg-[#D2ECFF]">
          <h2 class="text-lg font-semibold mb-4">Enter Your Details</h2>
          <form id="training-plan-form">
            <!-- Height Input -->
            <div class="mb-4">
                <label for="height" class="block mb-1 font-medium">Enter your Height (cm/inches)</label>
                <input type="number" id="height" name="height" placeholder="e.g., 170" class="w-full border border-gray-300 rounded p-2 focus:outline-none focus:border-blue-500" />
            </div>
              
            <!-- Weight Input -->
            <div class="mb-4">
                <label for="weight" class="block mb-1 font-medium">Enter your Weight (lbs/kg)</label>
                <input type="number" id="weight" name="weight" placeholder="e.g., 170" class="w-full border border-gray-300 rounded p-2 focus:outline-none focus:border-blue-500" />
            </div>
              
            <!-- Age Input -->
            <div class="mb-4">
                <label for="age" class="block mb-1 font-medium">Enter your Age</label>
                <input type="number" id="age" name="age" placeholder="e.g., 25" class="w-full border border-gray-300 rounded p-2 focus:outline-none focus:border-blue-500" />
            </div>
            
            <!-- Fitness Level Dropdown -->
            <div class="mb-4">
                <label for="fitness_level" class="block mb-1 font-medium">Current Fitness Level</label>
                <select id="fitness_level" name="fitness_level" class="w-full border border-gray-300 rounded p-2 focus:outline-none focus:border-blue-500">
                  <option value="Beginner">Beginner</option>
                  <option value="Intermediate">Intermediate</option>
                  <option value="Advanced">Advanced</option>
                  <option value="Expert">Expert</option>
                </select>
            </div>
            
            <!-- Injury History -->
            <div class="mb-4">
                <label for="injury_history" class="block mb-1 font-medium">Injury History</label>
                <input type="text" id="injury_history" name="injury_history" placeholder="e.g., Wrist Sprains" class="w-full border border-gray-300 rounded p-2 focus:outline-none focus:border-blue-500" />
            </div>

            <!-- Target Goal -->
            <div class="mb-4">
                <label for="target_goal" class="block mb-1 font-medium">Target Goal</label>
                <input type="text" id="target_goal" name="target_goal" placeholder="e.g., Build Muscle, Improve Stamina" class="w-full border border-gray-300 rounded p-2 focus:outline-none focus:border-blue-500" />
            </div>
            
            <!-- Submit Button -->
            <button type="submit" class="w-full bg-blue-600 text-white rounded p-2 hover:bg-blue-700 transition">
              Generate Training Plan
            </button>
          </form>
          
          <!-- Section to display the generated training plan -->
          <div id="user-profile-output" class="mt-4 text-gray-700 whitespace-pre-wrap"></div>
        </section>
    </main>
      
    <script>
      document.getElementById('training-plan-form').addEventListener('submit', async function(event) {
          event.preventDefault();
          
          // Capture form values
          const height = document.getElementById('height').value;
          const weight = document.getElementById('weight').value;
          const age = document.getElementById('age').value;
          const fitness_level = document.getElementById('fitness_level').value;
          const injury_history = document.getElementById('injury_history').value;
          const target_goal = document.getElementById('target_goal').value;
          
          // Create a user profile object to send to the backend
          const userProfileDict = {
             height: parseFloat(height),
             weight: parseFloat(weight),
             age: parseInt(age),
             currentExerciseLevel: fitness_level,
             injury_history: injury_history,
             target_goal: target_goal
          };
      
          try {
              // Make a POST request to the /api/workout endpoint
              const response = await fetch("/api/workout", {
                  method: "POST",
                  headers: {
                      "Content-Type": "application/json"
                  },
                  body: JSON.stringify(userProfileDict)
              });
      
              if (!response.ok) {
                  throw new Error("Network response was not ok");
              }
      
              // Parse the JSON response
              const result = await response.json();
              console.log("Training Plan:", result);
      
              // Display the training plan in the output div
              document.getElementById('user-profile-output').textContent = JSON.stringify(result.trainingPlan, null, 2);
              
          } catch (error) {
              console.error("Error generating training plan:", error);
              document.getElementById('user-profile-output').textContent = "Error generating training plan. Check console for details.";
          }
      });
    </script>
</body>
</html>
